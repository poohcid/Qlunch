{% extends "base.html" %}
{% block content %}
<style>
    .todolist {
        height: 600px;
        border: 1px solid #000;
        padding: 15px;
        border-radius: 5px;
        margin: 5px;
    }
</style>
<h1><br>หมายเลขโต๊ะ : {{ table.id }}</h1><br>
<div class="row">
    <div class="col-md todolist">
        <div class="row">
            <div class="col">
                <h3>เพิ่มเมนูอาหาร</h3>
            </div>
            <div class="col">
                <form action="">
                    <input type="text" name="" id="" placeholder="ค้นหารายการอาหาร" class="form-control">
                </form>
            </div>
        </div>

        <ul id="foodmenu" class="list-group overflow-auto">
            {% for f in food %}
            <li class="list-group-item d-flex justify-content-between align-items-center bd-highlight">
                <div class="foodname p-1 flex-grow-1 bd-highlight">{{ f.name }}</div>
                <div class="p-1 bd-highlight alert alert-primary m-0">{{ f.price }} บาท</div>
                <div class="p-1 bd-highlight"> <button type="button" class="btn btn-success" onclick="addtoOrder(this)" value="{{ f.name }}">
                        เพิ่ม
                    </button></div>
            </li>
            {% endfor %}
        </ul>
    </div>


    <div class="col-md todolist overflow-auto">
        <h3>รายการอาหารของออเดอร์</h3>
        <form action="">
        <ul id="foodorder" class="list-group">
            <li class="list-group-item d-flex justify-content-between align-items-center">
                ทำการบ้าน web programming
                <button type="button" class="btn btn-danger" onclick="deleteMenu(this)">
                    ลบ
                </button>
            </li>
        </ul>
        </form>
    </div>
    
</div>

<div class="row">
    <div class="col">
        <h2>ราคาทั้งหมด : </h2>
    </div>
</div>

<script>
    var total_price = 0;
    var count = 1
    function addtoOrder(list) {
        var order_ul = document.querySelectorAll("#foodorder > li")
        var have_menu = false
        
        for(i=0;i<order_ul.length;i++){
            if(list.value == order_ul[i].firstChild.textContent){
                num = order_ul[i].firstChild.nextSibling.value
                order_ul[i].firstChild.nextSibling.value = parseInt(num) + 1

                have_menu = true
            }
        }
        if(have_menu == false){
            ul = document.querySelector("#foodorder")
            li = document.createElement("li")
            li.className = "list-group-item d-flex justify-content-between align-items-center"
            li.innerHTML = '<div class="foodname p-1 flex-grow-1 bd-highlight">'+list.value+'</div>'
            li.innerHTML = li.innerHTML+'<input class="amount'+count+' form-control" style="width: 60px; margin-right: 10px;" type="number" value="1" min="0" max="999"/>'
            li.innerHTML = li.innerHTML+'<button type="button" class="btn btn-danger" onclick="deleteMenu(this)">ลบ</button>'
            ul.appendChild(li)
            count = count+1
        }
    }
    function deleteMenu(menuname){
        menuname.parentNode.remove()
    }
</script>



{% endblock  %}